(function(y){var Y=y;var B={timeOut:6000,tips:{ajaxRequestError:"抱歉，请求执行出错！",ajaxOnError:"请求出错！",ajaxOnTimeOut:"请求超时！"},_cookie:{global:".163.com",sInfo:"S_INFO",pInfo:"P_INFO",nickname:"NTES_REPLY_NICKNAME"},showNameMaxLen:12,login:{regular:{userName:/^\w+([\-\+\.]*\w+)*@\w+([\-\.]\w+)*\.\w+([\-\.]\w+)*$/},url:{checkUserName:"http://t.163.com/account/passport/check"},tips:{userNameEmpty:"请输入你的网易通行证",userNameFormatError:"请输入正确的通行证，如abc@163.com",passwordEmpty:"密码不能为空"}},reg:{url:/(http)s?:\/\/(?:[\w-]+\.?)+[\.\/\?%&=#@\[\]\-+_!:*~\w-]+|(www)\.(?:[\w-]+\.?)+[\.\/\?%&=#@\[\]\-+_!:*~\w-]+/gi,keyword:/([#＃])([\u4e00-\u9fa5a-zA-Z0-9+|]{1,20})/g,user:/([@＠])([\u4e00-\u9fa5a-zA-Z0-9]{1,24})/g,reTplValues:/<#=(\w+)#>/g,showNameReg:/^[\u4e00-\u9fa5a-zA-Z0-9]+$/},url:{wbarticleCommon:"http://t.163.com/share/tweet",wbarticleCheckNickName:"http://t.163.com/share/check/nickname",wbarticleOpenAccount:"http://t.163.com/share/open/account",wbarticleFolow:"http://t.163.com/share/follow",wbarticleCheckStatus:"http://t.163.com/share/check/status",wbarticleRegister:"http://reg.163.com/reg/reg.jsp?product=t&url=http://t.163.com/&loginurl=http://t.163.com",wbarticleShare:"http://api.t.163.com/inshare",wbarticleLogin1:"http://reg.163.com/services/httpLoginExchgKey",wbarticleLogin2:"http://reg.163.com/httpLoginVerifySHA1.jsp",wbarticleStarList:"http://static.t.126.net/share/recommend/<#=channelId#>/article.js",wbarticleNewsList:"http://static.t.126.net/share/recommend/<#=channelId#>/articleLink.js",wbarticleOimage:"http://oimageb7.ydstatic.com/image?w=<#=width#>&h=<#=height#>&url=<#=url#>",auditlink:"http://t.163.com/page.do"},currentWindow:"",shade:"",email:""};var l={};l.commonPopWindow='<table class="wb-article-newdialogLayer-table">      <tbody>         <tr>            <td class="wb-article-newdialogLayer-top-left"></td>            <td class="wb-article-newdialogLayer-top-center"></td>            <td class="wb-article-newdialogLayer-top-right"></td>         </tr>         <tr>            <td class="wb-article-newdialogLayer-middle-left"></td>            <td class="wb-article-newdialogLayer-middle-center">               <div class="wb-article-newdialogLayer-content">                  <div class="wb-article-newdialogLayer-bd">                     <div class="wb-article-newdialogLayer-title wb-article-dragBar">                        <div class="wb-article-newtitle-icon">                           <em></em><#=title#>                        </div>                        <div class="wb-article-newclose-wraper wb-article-common-close">                           <a title="关闭" href="javascript:;" class="wb-article-newclose-icon wb-article-newdialogLayer-close "></a>                        </div>                     </div>                     <#=content#>                  </div>               </div>            </td>            <td class="wb-article-newdialogLayer-middle-right"></td>         </tr>         <tr>            <td class="wb-article-newdialogLayer-bottom-left"></td>            <td class="wb-article-newdialogLayer-bottom-center"></td>            <td class="wb-article-newdialogLayer-bottom-right"></td>         </tr>      </tbody>   </table>';l.loginForm='<div class="wb-article-popWindow-formWraper" style="width:<#=width#>px;">\u000a<div class="wb-article-popWindowhd"></div>\u000a    <div class="wb-article-popLoginSideColumn" style="width:<#=sideWidth#>px;">\u000a        <a class="wb-article-popLoginBg wb-article-popLoginRegBtn" id="<#=registerBtnNodeId#>" href="#" target="_blank"></a>\u000a    </div>\u000a    <div class="wb-article-popLoginContent" style="width:<#=formWidth#>px;">\u000a        <div class="wb-article-popLoginArea">\u000a              <table>\u000a                <tbody>\u000a                    <tr>\u000a                        <td>\u000a                            <label for="<#=userNameNodeId#>" class="wb-article-popLoginLb">\u000a                                帐号：</label>\u000a                        </td>\u000a                        <td>\u000a  <div class="wb-article-input-wraper"><input type="text" autocomplete="off" class="wb-article-popLogin-inputField" name="<#=userNameNodeId#>" value="<#=email#>" id="<#=userNameNodeId#>">\u000a <input class="wb-article-login-area-hint" type="input" id="wb-article-login-area-hint" value="如 name@example.com" /></div></td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                            <label class="wb-article-popLoginLb" for="<#=passwordNodeId#>">\u000a                                密码：</label>\u000a                        </td>\u000a                        <td>\u000a                            <input type="password" class="wb-article-popLogin-inputField" name="<#=passwordNodeId#>" id="<#=passwordNodeId#>">\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                        </td>\u000a                        <td>\u000a   <span  class="wb-article-popLogin-remmber-chk" id="wb-article-popLogin-remmber-chk" >   <input type="checkbox"  name="<#=saveLoginNodeId#>" id="<#=saveLoginNodeId#>">下次自动登录<div class="wb-article-login-tiparea wb-article-autologin-tiparea" id="wb-article-autologin_tiparea">\u000a    <div class="wb-article-login-tiparea-top wb-article-arrowup-red">\u000a    </div>\u000a    <a title="关闭" onclick="$(\'#wb-article-autologin_tiparea\').addCss(\'visibility:hidden\')" href="javascript:;"\u000a        class="wb-article-login-tiparea-close"></a>\u000a    <p>\u000a        为了您的信息安全，请不要在网吧或公用电脑上使用此功能！</p>\u000a</div></span> <a class="wb-article-popLogin-remmber"\u000a                                target="_blank" href="http://reg.163.com/RecoverPasswd1.shtml">忘记密码?</a>\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                        </td>\u000a                        <td>\u000a                            <a class="wb-article-btnbg wb-article-commonbtn" target="_self" id="<#=btnNodeId#>" href="javascript:;"><em class="wb-article-btnbg">\u000a                                <#=btnText#> </em></a><span class="wb-article-popLogin-error" id="<#=errorNodeId#>"></span><span id="<#=proccessingNodeId#>"></span>\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                </tbody>\u000a            </table>\u000a        </div>\u000a    </div>\u000a    <div class="wb-article-popWindowft"></div>\u000a</div>';l.openForm='<div class="wb-article-popWindow-formWraper" style="width:<#=width#>px;">\u000a<div class="wb-article-popWindowhd"></div>\u000a    <div class="wb-article-popLoginContent" style="width:auto;border-width:0;">\u000a        <div class="wb-article-popLoginArea">\u000a               <table>\u000a                <tbody>\u000a                    <tr>\u000a                        <td colspan="3">\u000a                            <div class="wb-article-popLogin-reminder">\u000a                                <span>检测到您已经登录网易通行证：</span><em><#=email#></em><a href="javascript:;" target="_self" style="color:#1E50A2" id="<#=changeAccountNodeId#>"> 换个帐号？</a>\u000a                            </div>\u000a                        </td>\u000a                    </tr>\u000a                                        <tr>\u000a                        <td colspan="3">\u000a                            <div class="wb-article-popLogin-reminder">\u000a                                <span>给自己起个昵称，快速开通微博</span>\u000a                            </div>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                            <label for="<#=userNameNodeId#>" class="wb-article-popLoginLb">\u000a                                昵 称：</label>\u000a                        </td>\u000a                        <td>\u000a                            <input type="text" class="wb-article-popLogin-inputField" name="<#=userNameNodeId#>" id="<#=userNameNodeId#>"><span style="color:#999"> 可以包含汉字、字母和数字，限制12个汉字<span>\u000a                        </td>\u000a                    </tr>\u000a                    <tr>\u000a                        <td>\u000a                        </td>\u000a                        <td>\u000a                            <a class="wb-article-btnbg wb-article-commonbtn" target="_self" id="<#=btnNodeId#>" href="javascript:;"><em class="wb-article-btnbg">\u000a                                <#=btnText#> </em></a><span class="wb-article-popLogin-error" id="<#=errorNodeId#>"></span><span id="<#=proccessingNodeId#>"></span>\u000a                        </td>\u000a                        <td>\u000a                        </td>\u000a                    </tr>\u000a                </tbody>\u000a            </table>\u000a        </div>\u000a    </div>\u000a    <div class="wb-article-popWindowft"></div>\u000a</div>';l.sendBoxWin='<div style="width:<#=width#>px;background-color:#fff;overflow:hidden;margin:5px 0" >\u000a            <div class="wb-article-item">\u000a              <textarea class="wb-article-popup-textarea" style="width:<#=boxWidth#>px;"></textarea>\u000a            </div>\u000a            <div class="wb-article-fr wb-article-clearfix">\u000a              <span class="send-info-tips hidden" ></span>\u000a              <span  class="wb-article-popup-note">\u000a                还可输<span  class="wb-article-char-constantia">163</span>字\u000a              </span>\u000a              <a title="按Ctrl+Enter键发微博" onclick="this.blur();" href="javascript:;" target="_self" class="wb-article-popup-sendinfo-btn" >\u000a                <em> <#=btnText#></em>\u000a              </a>\u000a            </div>\u000a </div>';l.sendInfoTip='<#=note#><span class="wb-article-char-constantia" style="color:<#=color#>"><#=countnum#></span> 字';(function(){var av="0123456789abcdef";function aA(aN){str="";for(j=0;j<=3;j++){str+=av.charAt((aN>>(j*8+4))&15)+av.charAt((aN>>(j*8))&15)}return str}function aB(aN){nblk=((aN.length+8)>>6)+1;blks=new Array(nblk*16);for(i=0;i<nblk*16;i++){blks[i]=0}for(i=0;i<aN.length;i++){blks[i>>2]|=aN.charCodeAt(i)<<((i%4)*8)}blks[i>>2]|=128<<((i%4)*8);blks[nblk*16-2]=aN.length*8;return blks}function aI(aN,aQ){var aP=(aN&65535)+(aQ&65535);var aO=(aN>>16)+(aQ>>16)+(aP>>16);return(aO<<16)|(aP&65535)}function aG(aN,aO){return(aN<<aO)|(aN>>>(32-aO))}function aE(aS,aP,aO,aN,aR,aQ){return aI(aG(aI(aI(aP,aS),aI(aN,aQ)),aR),aO)}function aH(aP,aO,aT,aS,aN,aR,aQ){return aE((aO&aT)|((~aO)&aS),aP,aO,aN,aR,aQ)}function aK(aP,aO,aT,aS,aN,aR,aQ){return aE((aO&aS)|(aT&(~aS)),aP,aO,aN,aR,aQ)}function ax(aP,aO,aT,aS,aN,aR,aQ){return aE(aO^aT^aS,aP,aO,aN,aR,aQ)}function aD(aP,aO,aT,aS,aN,aR,aQ){return aE(aT^(aO|(~aS)),aP,aO,aN,aR,aQ)}function aL(aN){x=aB(aN);a=1732584193;b=-271733879;c=-1732584194;d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=aH(a,b,c,d,x[i+0],7,-680876936);d=aH(d,a,b,c,x[i+1],12,-389564586);c=aH(c,d,a,b,x[i+2],17,606105819);b=aH(b,c,d,a,x[i+3],22,-1044525330);a=aH(a,b,c,d,x[i+4],7,-176418897);d=aH(d,a,b,c,x[i+5],12,1200080426);c=aH(c,d,a,b,x[i+6],17,-1473231341);b=aH(b,c,d,a,x[i+7],22,-45705983);a=aH(a,b,c,d,x[i+8],7,1770035416);d=aH(d,a,b,c,x[i+9],12,-1958414417);c=aH(c,d,a,b,x[i+10],17,-42063);b=aH(b,c,d,a,x[i+11],22,-1990404162);a=aH(a,b,c,d,x[i+12],7,1804603682);d=aH(d,a,b,c,x[i+13],12,-40341101);c=aH(c,d,a,b,x[i+14],17,-1502002290);b=aH(b,c,d,a,x[i+15],22,1236535329);a=aK(a,b,c,d,x[i+1],5,-165796510);d=aK(d,a,b,c,x[i+6],9,-1069501632);c=aK(c,d,a,b,x[i+11],14,643717713);b=aK(b,c,d,a,x[i+0],20,-373897302);a=aK(a,b,c,d,x[i+5],5,-701558691);d=aK(d,a,b,c,x[i+10],9,38016083);c=aK(c,d,a,b,x[i+15],14,-660478335);b=aK(b,c,d,a,x[i+4],20,-405537848);a=aK(a,b,c,d,x[i+9],5,568446438);d=aK(d,a,b,c,x[i+14],9,-1019803690);c=aK(c,d,a,b,x[i+3],14,-187363961);b=aK(b,c,d,a,x[i+8],20,1163531501);a=aK(a,b,c,d,x[i+13],5,-1444681467);d=aK(d,a,b,c,x[i+2],9,-51403784);c=aK(c,d,a,b,x[i+7],14,1735328473);b=aK(b,c,d,a,x[i+12],20,-1926607734);a=ax(a,b,c,d,x[i+5],4,-378558);d=ax(d,a,b,c,x[i+8],11,-2022574463);c=ax(c,d,a,b,x[i+11],16,1839030562);b=ax(b,c,d,a,x[i+14],23,-35309556);a=ax(a,b,c,d,x[i+1],4,-1530992060);d=ax(d,a,b,c,x[i+4],11,1272893353);c=ax(c,d,a,b,x[i+7],16,-155497632);b=ax(b,c,d,a,x[i+10],23,-1094730640);a=ax(a,b,c,d,x[i+13],4,681279174);d=ax(d,a,b,c,x[i+0],11,-358537222);c=ax(c,d,a,b,x[i+3],16,-722521979);b=ax(b,c,d,a,x[i+6],23,76029189);a=ax(a,b,c,d,x[i+9],4,-640364487);d=ax(d,a,b,c,x[i+12],11,-421815835);c=ax(c,d,a,b,x[i+15],16,530742520);b=ax(b,c,d,a,x[i+2],23,-995338651);a=aD(a,b,c,d,x[i+0],6,-198630844);d=aD(d,a,b,c,x[i+7],10,1126891415);c=aD(c,d,a,b,x[i+14],15,-1416354905);b=aD(b,c,d,a,x[i+5],21,-57434055);a=aD(a,b,c,d,x[i+12],6,1700485571);d=aD(d,a,b,c,x[i+3],10,-1894986606);c=aD(c,d,a,b,x[i+10],15,-1051523);b=aD(b,c,d,a,x[i+1],21,-2054922799);a=aD(a,b,c,d,x[i+8],6,1873313359);d=aD(d,a,b,c,x[i+15],10,-30611744);c=aD(c,d,a,b,x[i+6],15,-1560198380);b=aD(b,c,d,a,x[i+13],21,1309151649);a=aD(a,b,c,d,x[i+4],6,-145523070);d=aD(d,a,b,c,x[i+11],10,-1120210379);c=aD(c,d,a,b,x[i+2],15,718787259);b=aD(b,c,d,a,x[i+9],21,-343485551);a=aI(a,olda);b=aI(b,oldb);c=aI(c,oldc);d=aI(d,oldd)}return aA(a)+aA(b)+aA(c)+aA(d)}var aF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function aw(aT){var aP,aR,aN;var aS,aQ,aO;aN=aT.length;aR=0;aP="";while(aR<aN){aS=aT.charCodeAt(aR++)&255;if(aR==aN){aP+=aF.charAt(aS>>2);aP+=aF.charAt((aS&3)<<4);aP+="==";break}aQ=aT.charCodeAt(aR++);if(aR==aN){aP+=aF.charAt(aS>>2);aP+=aF.charAt(((aS&3)<<4)|((aQ&240)>>4));aP+=aF.charAt((aQ&15)<<2);aP+="=";break}aO=aT.charCodeAt(aR++);aP+=aF.charAt(aS>>2);aP+=aF.charAt(((aS&3)<<4)|((aQ&240)>>4));aP+=aF.charAt(((aQ&15)<<2)|((aO&192)>>6));aP+=aF.charAt(aO&63)}return aP}function aC(aQ){var aO,aP,aN,aR;aO="";aN=aQ.length;for(aP=0;aP<aN;aP++){aR=aQ.charCodeAt(aP);if((aR>=1)&&(aR<=127)){aO+=aQ.charAt(aP)}else{if(aR>2047){aO+=String.fromCharCode(224|((aR>>12)&15));aO+=String.fromCharCode(128|((aR>>6)&63));aO+=String.fromCharCode(128|((aR>>0)&63))}else{aO+=String.fromCharCode(192|((aR>>6)&31));aO+=String.fromCharCode(128|((aR>>0)&63))}}}return aO}function aI(aN,aO){return((aN&2147483647)+(aO&2147483647))^(aN&2147483648)^(aO&2147483648)}function au(aO){var aP="0123456789abcdef";var aQ="";for(var aN=7;aN>=0;aN--){aQ+=aP.charAt((aO>>(aN*4))&15)}return aQ}function aJ(aP){var aN=((aP.length+8)>>6)+1,aQ=new Array(aN*16);for(var aO=0;aO<aN*16;aO++){aQ[aO]=0}for(aO=0;aO<aP.length;aO++){aQ[aO>>2]|=aP.charCodeAt(aO)<<(24-(aO&3)*8)}aQ[aO>>2]|=128<<(24-(aO&3)*8);aQ[aN*16-1]=aP.length*8;return aQ}function aG(aN,aO){return(aN<<aO)|(aN>>>(32-aO))}function ay(aO,aN,aQ,aP){if(aO<20){return(aN&aQ)|((~aN)&aP)}if(aO<40){return aN^aQ^aP}if(aO<60){return(aN&aQ)|(aN&aP)|(aQ&aP)}return aN^aQ^aP}function aM(aN){return(aN<20)?1518500249:(aN<40)?1859775393:(aN<60)?-1894007588:-899497514}function az(a0){var aZ=aJ(a0);var a1=new Array(80);var aY=1732584193;var aX=-271733879;var aW=-1732584194;var aV=271733878;var aU=-1009589776;for(var aR=0;aR<aZ.length;aR+=16){var aT=aY;var aS=aX;var aQ=aW;var aP=aV;var aN=aU;for(var aO=0;aO<80;aO++){if(aO<16){a1[aO]=aZ[aR+aO]}else{a1[aO]=aG(a1[aO-3]^a1[aO-8]^a1[aO-14]^a1[aO-16],1)}t=aI(aI(aG(aY,5),ay(aO,aX,aW,aV)),aI(aI(aU,a1[aO]),aM(aO)));aU=aV;aV=aW;aW=aG(aX,30);aX=aY;aY=t}aY=aI(aY,aT);aX=aI(aX,aS);aW=aI(aW,aQ);aV=aI(aV,aP);aU=aI(aU,aN)}SHA1Value=au(aY)+au(aX)+au(aW)+au(aV)+au(aU);return SHA1Value}window.getMd5=aL;window.SHA1=az;window.BASE64=aw;window.utf16to8=aC})();window.setLoginStatus=function(au){window.loginStatus=au};function at(av){var au=av,aw=false;au.id="wb-article-shade";if(typeof Settingpage!="undefined"&&Y.browser.msie&&Y.browser.version<7){au.innerHTML="<iframe style='position:absolute;width:100%;height:100%;_filter:alpha(opacity=0);opacity=0;border:1px solid #DDD;z-index:-1;top:100;left:0;'></iframe>"}this.show=function(){var ax=this;ax._setposEvent=null;if(!aw){au.style.width=window.screen.width+"px";au.style.height=window.screen.height+"px";au.style.top="0px";if(Y.browser.msie&&Y.browser.version<7){var ay=function(){ax.IE6Position()};ax.IE6Position();ax._setposEvent&&window.removeEvent("scroll",ay);ax._setposEvent=window.addEvent("scroll",ay)}au.style.display="block";aw=true}};this.IE6Position=function(){var ax=Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight);au.style.width=Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth)+"px";au.style.position="absolute";au.style.height=Math.min(ax,3000)+"px";au.style.top=Math.min(Math.max((ax-3000),0),Math.max((document.documentElement.scrollTop-3000)+window.screen.availHeight,0))+"px"};this.hide=function(){if(aw){au.style.display="none";aw=false}}}Y.ui.DragHandler=function(ay,aB){this.constructor=arguments.callee;var aw=Y.style.getCurrentStyle(ay,"position").toLowerCase()==="fixed",aE={x:ay.offsetLeft||0-(aw?Y(document.body).scrollLeft:0),y:ay.offsetTop||0-(aw?Y(document.body).scrollTop:0)},aC,au,ax,aA;function az(aG){var aF={x:Math.max(0,Math.min(document.documentElement.scrollWidth-ay.offsetWidth,aG.pageX-aC.x)),y:Math.max(0,Math.min(document.documentElement.scrollHeight-ay.offsetHeight,aG.pageY-aC.y))};ay.style.left=aF.x+"px";ay.style.top=aF.y+"px";aE={x:aF.x-(aw?Y(document.body).scrollLeft:0),y:aF.y-(aw?Y(document.body).scrollTop:0)};ax&&ax(ay,this,aF);aG.cancelBubble=true}function av(){if(ay.releaseCapture){ay.releaseCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}Y(document.body).removeEvent("mousemove",az);Y(document.body).removeEvent("mouseup",av);aA&&aA(ay)}function aD(aF){if(ay.setCapture){ay.setCapture()}else{if(window.captureEvents){window.captureEvents(Event.MOUSEMOVE|Event.MOUSEUP)}}aC={x:aF.pageX-ay.offsetLeft,y:aF.pageY-ay.offsetTop};Y(document.body).addEvent("mousemove",az);Y(document.body).addEvent("mouseup",av);au&&au(ay,this);aF.preventDefault()}this.setOnDragStart=function(aF){au=aF};this.setOnMove=function(aF){onMove=aF};this.setOnStopMove=function(aF){onStopMove=aF};this.init=function(){Y.event.addEvent(aB,"mousedown",aD)}};Y.ui.WinLayer=function(az,aw,ay,av,au){if(!arguments.length){return}var ax=this;ax.constructor=arguments.callee;ax._wrapper=az;ax._showType=ay||"display";ax._showTypeObject={display:{show:"block",hidden:"none"},visibility:{show:"visible",hidden:"hidden"}};ax._isDeleteNode=av||false;ax._isShowed=Y.style.getCurrentStyle(az,ax._showType).toLowerCase()!=ax._showTypeObject[ax._showType].hidden;ax._isFixed=Y.style.getCurrentStyle(az,"position").toLowerCase()=="fixed";ax._isShade=aw;ax.isClickClose=au;(new Y.ui.DragHandler(az,az.$(".wb-article-popupLayer-hd,.wb-article-dragBar"))).init();az.$("a.wb-article-popupLayer-close,.wb-article-common-close").addEvent("click",function(aA){ax.hide();aA.cancelBubble=true;return false}.bind(ax)).addEvent("drag",function(aA){aA.cancelBubble=true})};Y.ui.WinLayer.prototype={getWidth:function(){return this._wrapper.offsetWidth},getHeight:function(){return this._wrapper.offsetHeight},show:function(au,aA,av){var aw=this;if(!aw._isShowed){var az=aw._wrapper;if(Y.browser.msie&&Y.browser.version<7){aw._tempTop=document.documentElement.scrollTop;aw._tempScroll=aw._scroll.bind(aw);window.addEvent("scroll",aw._tempScroll)}var ay,ax;if(aw._isFixed){ay=null==au||isNaN(au)?parseInt((document.documentElement.clientWidth-az.offsetWidth)/2):au-document.documentElement.scrollLeft;ax=null==aA||isNaN(aA)?parseInt((document.documentElement.clientHeight-az.offsetHeight)/2.3):aA-(document.documentElement.scrollTop==0?Y(document.body).scrollTop:document.documentElement.scrollTop)}else{ay=null==au||isNaN(au)?parseInt((document.documentElement.clientWidth-az.offsetWidth)/2+document.documentElement.scrollLeft):au;ax=null==aA||isNaN(aA)?parseInt((document.documentElement.clientHeight-az.offsetHeight)/2.3+Math.max(Y(document.body).scrollTop,document.documentElement.scrollTop)):aA}az.style.left=ay+"px";az.style.top=ax+"px";az.style[aw._showType]=aw._showTypeObject[aw._showType].show;aw.onShow&&aw.onShow();aw._isShowed=true;av&&(aw._hideTimer=setTimeout(function(){aw.hide()},av*1000));aw._isShade&&B.shade.show();aw.keydownBindEvent=aw.keydownListionEvent.bind(aw);Y(document).addEvent("keydown",aw.keydownBindEvent);if(aw.isClickClose){aw.clickBindEvent=aw.clickListionEvent.bind(aw);Y(document).addEvent("click",aw.clickBindEvent)}}},hide:function(){var au=this;if(au._isShowed){au._tempScroll&&window.removeEvent("scroll",au._tempScroll);au.onHide&&au.onHide();au._isShowed=false;if(au._hideTimer){clearTimeout(au._hideTimer);au._hideTimer=null}au._isShade&&B.shade.hide();Y(document).removeEvent("keydown",au.keydownBindEvent);if(au.isClickClose){Y(document).removeEvent("click",au.clickBindEvent)}if(au._isDeleteNode){au._wrapper.parentNode.removeChild(au._wrapper)}else{Y.style.addCss(au._wrapper,au._showType+":"+au._showTypeObject[au._showType].hidden+";left:0;top:0;")}}},_scroll:function(){var au=this;au._wrapper.style.top=parseInt(au._wrapper.style.top)+document.documentElement.scrollTop-au._tempTop;au._tempTop=document.documentElement.scrollTop},keydownListionEvent:function(av){var au=this;if(av.keyCode==27){au.hide()}},clickListionEvent:function(av){var au=this,aw=av.target?av.target:event.srcElement;do{if(aw.className=="dialog"){return}if(aw.tagName.toUpperCase()=="BODY"||aw.tagName.toUpperCase()=="HTML"){au.hide();return}aw=aw.parentNode}while(aw.parentNode)}};(function(aD,aB){var au="NTES";var ax=au+"AnimateId",ay={};var av=aD.style.getCurrentStyle;function aH(aL,aM,aJ){var aK=aL["offset"+aM];aJ=aJ||"";aD.each("Width"==aM?["Left","Right"]:["Top","Bottom"],function(aN,aO){if(-1==aJ.indexOf("padding")){aK-=parseFloat(av(aL,"padding"+aO))||0}if(-1==aJ.indexOf("border")){aK-=parseFloat(av(aL,"border"+aO+"Width"))||0}if(aJ.indexOf("margin")!=-1){aK+=parseFloat(av(aL,"margin"+aO))||0}});return aK}aD.element.width=function(){if("number"==typeof arguments[0]){return this.addCss({width:arguments[0]+"px"})}else{return aH(this.get(0),"Width",arguments[0])}};aD.element.height=function(){if("number"==typeof arguments[0]){return this.addCss({height:arguments[0]+"px"})}else{return aH(this.get(0),"Height",arguments[0])}};var aw=/opacity=([^,)]*)/;var aG=/alpha\([^\)]*\)/;aD.element.opacity=function(aM){if("number"==typeof aM){return this.each(function(){if(this.style.opacity===aB){var aN=av(this,"filter")||"",aO="alpha(opacity="+aM*100+")";this.style.filter=aG.test(aN)?aN.replace(aG,aO):aO}else{this.style.opacity=aM}})}else{var aL=this.get(0),aJ,aK;if(aL.style.opacity===aB){aJ=aw.test(av(aL,"filter")||"")?(aJ=parseFloat(RegExp.$1)/100):""}else{aJ=this.style.opacity||av(aL,"opacity");aJ!==""&&(aJ=parseFloat(aJ))}return""===aJ?1:aJ}};var aA=/^\-{0,1}\d+(?:\.\d+)?[^\s]*$/;var az=/^(?:width|height|opacity)$/i;var aC=/^(?:zIndex|fontWeight|opacity|zoom|lineHeight)$/;function aF(aK){var aJ=aA.test(aK)?parseFloat(aK)||0:aK.toLowerCase();return aJ}function aE(aJ,aL){var aK=[],aM;for(aM in aL){aL[aM]=aF(aL[aM]);aJ.each(function(aN){!aK[aN]&&(aK[aN]={});aK[aN][aM]=az.test(aM)?aD(this)[aM]():aF(av(this,aM))})}return aK}aD.element.animate=function(aN,aO,aP,aQ){typeof aP!=="function"&&(aP=aI[aP]);aO=aO*1000;aN=aD.style.parse(aN);var aK=this;aK.stop();var aM=aE(aK,aN);"visible"==aN.visibility&&aK.addCss({visibility:"visible"});"block"==aN.display&&aK.addCss({display:"block"});var aL=Date.now();var aJ=setInterval(function(){var aT=Date.now()-aL,aS=aT/aO,aX,aY,aW,aV,aU,aR=aM.length;for(aV in aN){aU=-1;while(++aU<aR){aX=aM[aU][aV];aY=aN[aV];if("number"==typeof aX&&aX!=aY){aW=aX+(aY-aX)*aP(0,1,aS);((aY>aX&&aW>aY)||(aY<aX&&aW<aY))&&(aW=aY);if(az.test(aV)){aK.$(aU)[aV](aW)}else{aK.get(aU).style[aV]=aC.test(aV)?aW:aW+"px"}}}}if(aT>=aO){if(!ay[aJ]){clearInterval(aJ);"hidden"==aN.visibility&&aK.addCss({visibility:"hidden"});"none"==aN.display&&aK.addCss({display:"none"});aQ&&aQ();ay[aJ]=true}}},13);return this.attr(ax,new Number(aJ))};aD.element.stop=function(){return this.each(function(){var aK=this[ax];if(aK!=null){if(!ay[aK]){clearInterval(aK);ay[aK]=true}try{delete this[ax]}catch(aJ){}}})};var aI={linear:function(aJ,aL,aK){return aJ+aL*aK}}})(NTES);function o(aw,av){if(!arguments.length){return}var au=this;au.constructor=arguments.callee;au.usernameInputElement=false;au.usernameInputElementX=false;au.usernameInputElementY=false;au.usernameInputHeight=false;au.usernameListElement=false;au._initWidth=0;au._runFuc=av;au.currentSelectIndex=-1;au.domainSelectElmentString='<div style="padding:0px; margin-top:-3px;"><table width="100%" cellspacing="0" cellpadding="0"><tbody><tr><td class="title" style="title" >请选择或继续输入...</td></tr><tr><td><td /></tr></tbody></table></div><div style="display: none;"></div><div id="passport_111"></div>';au.domainSelectElement=false;au.domainArray=["163.com","126.com","yeah.net","qq.com","vip.163.com","vip.126.com","188.com","gmail.com","sina.com","hotmail.com"];au.helpDivString='<div style="width:100%;" id="passport_helper_div"></div>';au.bind(aw)}o.prototype={bind:function(aw){var au=this;au.usernameInputElement=aw;var av=X(au.usernameInputElement);au.usernameInputElementX=av.x;au.usernameInputElementY=av.y;au.handle();Y(au.usernameInputElement).addEvent("focus",function(){au._initWidth=(au.usernameInputElement.offsetWidth-4);au.domainSelectElement.style.width=(au.usernameInputElement.offsetWidth-4)+"px"})},resizeFunc:function(){var aw=this;var ax=document.getElementById("passportusernamelist");var av=X(aw.usernameInputElement).x;var au=X(aw.usernameInputElement).y;ax.style.left=av+"px";ax.style.top=(au+aw.usernameInputElement.offsetHeight)+"px"},handle:function(){var av=this;if(!document.getElementById("passportusernamelist")){var au=document.createElement("DIV");au.id="passportusernamelist";au.className="wb-article-domainSelector";au.style.position="absolute";au.style.display="none";document.body.appendChild(au);au.innerHTML=av.domainSelectElmentString}av.domainSelectElement=document.getElementById("passportusernamelist");av.usernameListElement=av.domainSelectElement.firstChild.firstChild.rows[1].firstChild;av.currentSelectIndex=0;av.usernameInputElement.onblur=function(){av.doSelect.call(av)};try{this.usernameInputElement.addEventListener("keypress",av.keypressProc.bind(av),false);this.usernameInputElement.addEventListener("keyup",av.keyupProc.bind(av),false)}catch(aw){try{this.usernameInputElement.attachEvent("onkeydown",av.checkKeyDown.bind(av));this.usernameInputElement.attachEvent("onkeypress",av.keypressProc.bind(av));this.usernameInputElement.attachEvent("onkeyup",av.keyupProc.bind(av))}catch(aw){}}av.resizeFunc();if(navigator.userAgent.indexOf("MSIE")>0){window.attachEvent("onresize",function(){av.resizeFunc()})}else{window.onresize=av.resizeFunc()}},preventEvent:function(au){au.cancelBubble=true;au.returnValue=false;if(au.preventDefault){au.preventDefault()}if(au.stopPropagation){au.stopPropagation()}},checkKeyDown:function(av){var au=this;var aw=av.keyCode;if(aw==38||aw==40){au.clearFocus();if(aw==38){au.upSelectIndex()}else{au.downSelectIndex()}au.setFocus()}},keyupProc:function(aw){var av=this;var ax=aw.keyCode;av.changeUsernameSelect();if(ax==13){av.doSelect()}var au;if((au=navigator.userAgent.indexOf("Safari"))>0){if(ax==38||ax==40){av.preventEvent(aw);av.clearFocus();if(ax==38){av.upSelectIndex()}else{av.downSelectIndex()}av.setFocus()}}},keypressProc:function(av){var au=this;var aw=av.keyCode;if(aw==13){au.preventEvent(av)}else{if(aw==38||aw==40){au.clearFocus();if(aw==38){au.upSelectIndex()}else{au.downSelectIndex()}au.setFocus()}else{au.changeUsernameSelect()}}},clearFocus:function(av){var aw=this;var av=aw.currentSelectIndex;try{var au=aw.findTdElement(av);au.style.backgroundColor="white"}catch(ax){}},findTdElement:function(av){var ax=this;try{var au=ax.usernameListElement.firstChild.rows;for(var aw=0;aw<au.length;++aw){if(au[aw].firstChild.idx==av){return au[aw].firstChild}}}catch(ay){}return false},upSelectIndex:function(){var ax=this;var av=ax.currentSelectIndex;if(ax.usernameListElement.firstChild==null){return}var au=ax.usernameListElement.firstChild.rows;var aw;for(aw=0;aw<au.length;++aw){if(au[aw].firstChild.idx==av){break}}if(aw==0){ax.currentSelectIndex=(au.length-1)}else{ax.currentSelectIndex=au[aw-1].firstChild.idx}},downSelectIndex:function(){var ax=this;var av=ax.currentSelectIndex;if(ax.usernameListElement.firstChild==null){return}var au=ax.usernameListElement.firstChild.rows;var aw=0;for(;aw<au.length;++aw){if(au[aw].firstChild.idx==av){break}}if(aw>=au.length-1){ax.currentSelectIndex=au[0].firstChild.idx}else{ax.currentSelectIndex=au[aw+1].firstChild.idx}},setFocus:function(){var aw=this;var av=aw.currentSelectIndex;try{var au=aw.findTdElement(av);au.style.backgroundColor="#D5F1FF"}catch(ax){}},changeUsernameSelect:function(){var aF=this;var ax=this.usernameInputElement.value;if(ax.trim()==""){this.domainSelectElement.style.display="none"}else{var az="",aE="";var aD;if((aD=ax.indexOf("@"))<0){az=ax;aE=""}else{az=ax.substr(0,aD);aE=ax.substr(aD+1,ax.length)}var aB=[];if(aE==""){for(var aA=0;aA<this.domainArray.length;++aA){aB.push(az+"@"+this.domainArray[aA])}}else{for(var aA=0;aA<this.domainArray.length;++aA){if(this.domainArray[aA].indexOf(aE)==0){aB.push(az+"@"+this.domainArray[aA])}}}if(aB.length>0){aF.resizeFunc();aF.domainSelectElement.style.zIndex="10000";aF.domainSelectElement.style.paddingRight="0";aF.domainSelectElement.style.paddingLeft="0";aF.domainSelectElement.style.paddingTop="2px";aF.domainSelectElement.style.paddingBottom="0";aF.domainSelectElement.style.backgroundColor="white";aF.domainSelectElement.style.display="block";var aG=document.createElement("TABLE");aG.cellSpacing=0;aG.cellPadding=3;var ay=document.createElement("TBODY");aG.appendChild(ay);for(var aA=0;aA<aB.length;++aA){var aC=document.createElement("TR");var av=document.createElement("TD");av.nowrap="true";av.align="left";av.innerHTML=aB[aA];av.idx=aA;av.onmouseover=function(){aF.clearFocus();aF.currentSelectIndex=this.idx;aF.setFocus();this.style.cursor="hand"};av.onmouseout=function(){};av.onclick=function(){aF.doSelect()};aC.appendChild(av);ay.appendChild(aC)}aF.usernameListElement.innerHTML="";aF.usernameListElement.appendChild(aG);var au=0;for(var aw=0;aw<aB.length;++aw){if(aB[aw].length>au){au=aB[aw].length}}au=au*7.4;if(au<aF._initWidth){au=aF._initWidth}aG.style.width=au+"px";this.domainSelectElement.style.width=aG.style.width;this.setFocus()}else{this.domainSelectElement.style.display="none";this.currentSelectIndex=-1}}},doSelect:function(){var av=this;av.domainSelectElement.style.display="none";if(av.usernameInputElement.value.trim()==""){return}var au=av.findTdElement(av.currentSelectIndex);if(au){av.usernameInputElement.value=au.innerHTML}av._runFuc()}};function ak(au){this.options={size:15,maxButtons:9,itemCount:0,index:1,pageCount:1};this.container=null;this._start=1;this._end=1;this.options.pageCount=Math.ceil(this.options.itemCount/this.options.size);for(var av in au){this.options[av]=au[av]}this.staticDataCollection=[]}ak.prototype={onclick:function(au){return true},_onclick:function(av){var au=this.options.index;this.options.index=av;if(this.onclick(av)!==false){this.render(this.wraperId)}else{this.options.index=au}},_calculate:function(){this.options.pageCount=parseInt(Math.ceil(this.options.itemCount/this.options.size));this.options.index=parseInt(this.options.index);if(this.options.index>this.options.pageCount){this.options.index=this.options.pageCount}if(this.options.index<1){this.options.index=1}this._start=Math.max(1,this.options.index-parseInt(this.options.maxButtons/2));this._end=Math.min(this.options.pageCount,this._start+this.options.maxButtons-1);this._start=Math.max(1,this._end-this.options.maxButtons+1)},page:function(aw){this._calculate();var au=(this.index-1)*this.options.size;var av=this.index*this.options.size;return aw.slice(au,av)},render:function(){return true},bind:function(){var aw=this.container.getElementsByTagName("a");var av=this;for(var au=0;au<aw.length;au++){aw[au].onclick=function(){var ax=this.getAttribute("href");if(ax!=undefined&&ax!=""){ax=parseInt(ax.replace("javascript://",""));av._onclick(ax)}return false}}},getStaticData:function(av){var ax=[];if(this.options.size>this.staticDataCollection.length){return this.staticDataCollection}else{if(av>this.options.pageCount){return[]}else{if(av<=this.options.pageCount){for(var aw=0;aw<this.staticDataCollection.length;aw++){for(var au=0;au<this.options.size;au++){if(aw==(av-1)*this.options.size+au){ax.push(this.staticDataCollection[aw])}}}return ax}}}}};function g(ay,av,ax,aw){var au=this;au._wrapperId=ay;au._wrapperClass=av;au._wrapperTemplatesHtml=ax;au.wrapperElem=Y(document.createElement("DIV"));au.wrapperElem.style.width=aw+"px";au.wrapperElem.id=au._wrapperId;au.wrapperElem.className=au._wrapperClass;au.wrapperElem.innerHTML=au._wrapperTemplatesHtml;Y(document.body).appendChild(au.wrapperElem);au.commonPopWindow=new Y.ui.WinLayer(au.wrapperElem,true,"visibility",true)}g.prototype.show=function(){this.commonPopWindow.show()};g.prototype.hide=function(){this.commonPopWindow.hide()};function am(az,aB){var ay=Y.cookie.get("P_INFO");var aA=ay!=""?ay.substr(0,ay.indexOf("|")):"";if(B.email!=""&&typeof B.email!="undefined"){aA=B.email}var aw={userNameNodeId:"loginEmail",passwordNodeId:"loginPassword",saveLoginNodeId:"saveLogin",btnNodeId:"loginBtn",btnText:az,errorNodeId:"error",proccessingNodeId:"proccessing",registerBtnNodeId:"registerBtn",email:aA,width:580,sideWidth:180,formWidth:360};var au={title:"网易微博登录",content:Y.util.parseTpl(l.loginForm,aw)};this.miniLoginWindow=new g("miniLoginWindow","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,au),600);this.refer=aB;this.proccessingNode=Y("#"+aw.proccessingNodeId);this.errorNode=Y("#"+aw.errorNodeId);this.userNameNode=Y("#"+aw.userNameNodeId);this.passwordNode=Y("#"+aw.passwordNodeId);this.btnNode=Y("#"+aw.btnNodeId);this.saveLoginNode=Y("#"+aw.saveLoginNodeId);this.registerBtnNode=Y("#"+aw.registerBtnNodeId);var av={};av.method="op.regfrom";av.keyfrom=this.refer.keyfrom;av.sitechannel=this.refer.sitechannel;this.registerBtnNode.href=B.url.wbarticleRegister;this.registerBtnNode.addEvent("click",function(){ad(av)});var aC=this;var ax=Y("#wb-article-autologin_tiparea");Y("#wb-article-popLogin-remmber-chk").addEvent("mouseover",function(){ax.addCss("display:block")}).addEvent("mouseout",function(){ax.addCss("display:none")});if(aA==""){Y("#wb-article-login-area-hint").style.display="block"}Y("#wb-article-login-area-hint").addEvent("click",function(){this.style.display="none";aC.userNameNode.focus()});aC.userNameNode.addEvent("blur",function(){if(aC.userNameNode.value.trim()==""){Y("#wb-article-login-area-hint").style.display="block"}});q(aC.userNameNode,function(){var aD=aC.userNameNode.value.trim();if(aD!=""){aC.passwordNode.focus()}});q(aC.passwordNode,function(){aC.send()});new o(aC.userNameNode,function(){aC.passwordNode.focus()});this.init()}am.prototype.show=function(){this.miniLoginWindow.show()};am.prototype.hide=function(){this.miniLoginWindow.hide()};am.prototype.afterAction=function(){};am.prototype.loginOpenAction=function(){};am.prototype.showMessage=function(au){var av=this;av.errorNode.innerHTML=au;setTimeout(function(){av.errorNode.innerHTML=""},2000);av.proccessingNode.innerHTML=""};am.prototype.showProccessing=function(){this.proccessingNode.innerHTML="登录中，请稍后..."};am.prototype.send=function(){var ax=this;var ay=f(ax.userNameNode.attr("value"));var av=f(ax.passwordNode.attr("value"));if(ay==""){ax.showMessage("帐号不能为空");return}if(av==""){ax.showMessage("密码不能为空");return}ax.showProccessing();var az={};az.method="op.login";az.keyfrom=ax.refer.keyfrom;az.sitechannel=ax.refer.sitechannel;window.logintimestamp=new Date().getTime();var aw=BASE64(utf16to8(ay+"\n"+logintimestamp)),au=ax.saveLoginNode.checked?1:0;var aA={url:B.url.wbarticleLogin1,param:{rnd:aw,jsonp:"setLoginStatus"},callBack:function(){if(typeof loginStatus=="undefined"){return}var aB=loginStatus.split("\n"),aE=aB[0];if(aE=="200"){var aC=aB[1];var aD={url:B.url.wbarticleLogin2,param:{rcode:SHA1(BASE64(utf16to8(aC))+BASE64(utf16to8(getMd5(av)))+aw),product:"t",jsonp:"setLoginStatus",savelogin:au},callBack:function(){if(typeof loginStatus=="undefined"){return}switch(loginStatus){case"200":var aF={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":ax.showMessage("登录成功");setTimeout(function(){ax.hide()},1000);setTimeout(function(){ax.afterAction()},2000);ad(az);break;case"-1":ax.showMessage("发生错误，请稍后再试");break;case"-3":setTimeout(function(){ax.hide()},1000);setTimeout(function(){ax.loginOpenAction()},2000);break;case"-5":ax.showMessage("登录失败");break;default:break}}};Z(aF);break;case"420":ax.showMessage("用户名错误");break;case"460":ax.showMessage("密码错误");break;default:ax.showMessage("登录错误次数太多，请稍后再试");break}}};Z(aD)}else{ax.showMessage("登录失败")}loginStatus&&delete loginStatus}};Z(aA);return false};am.prototype.init=function(){var au=this;au.btnNode.addEvent("click",function(){au.send();return false})};function ac(ay,ax){var aA=Y.cookie.get("P_INFO");var av=aA!=""?aA.substr(0,aA.indexOf("|")):"";if(B.email!=""&&typeof B.email!="undefined"){av=B.email}var au={userNameNodeId:"loginEmail",btnNodeId:"loginBtn",btnText:ay,errorNodeId:"error",proccessingNodeId:"proccessing",changeAccountNodeId:"changeAccount",email:av,width:580};var az={title:"开通网易微博",content:Y.util.parseTpl(l.openForm,au)};this.miniOpenWindow=new g("miniOpenWindow","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,az),600);this.refer=ax;this.proccessingNode=Y("#"+au.proccessingNodeId);this.errorNode=Y("#"+au.errorNodeId);this.userNameNode=Y("#"+au.userNameNodeId);this.btnNode=Y("#"+au.btnNodeId);this.changeAccountNode=Y("#"+au.changeAccountNodeId);var aw=this;q(aw.userNameNode,function(){aw.send()});this.init()}ac.prototype.show=function(){this.miniOpenWindow.show()};ac.prototype.hide=function(){this.miniOpenWindow.hide()};ac.prototype.showNameFormat=function(au){if(au==""){this.showMessage("昵称不能为空");return false}if(au.replace(/[\u4e00-\u9fa5]/g,"**").length>B.showNameMaxLen*2){this.showMessage("昵称不超过"+B.showNameMaxLen+"个汉字");return false}if(!B.reg.showNameReg.test(au)){this.showMessage("只能是汉字、字母或数字");return false}return true};ac.prototype.afterAction=function(){};ac.prototype.changeAccountAction=function(){};ac.prototype.showMessage=function(au){var av=this;av.errorNode.innerHTML=au;setTimeout(function(){av.errorNode.innerHTML=""},2000);av.proccessingNode.innerHTML=""};ac.prototype.showProccessing=function(){this.proccessingNode.innerHTML="开通中，请稍后..."};ac.prototype.send=function(){var av=this;if(!av.showNameFormat(f(av.userNameNode.value))){return false}av.showProccessing();var au={};au.keyfrom=av.refer.keyfrom;au.method="op.reg.nickname";au.sitechannel=av.refer.sitechannel;au.nickName=av.userNameNode.value;var aw={url:B.url.wbarticleCheckNickName,param:{showName:av.userNameNode.value},callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case 0:var ax={url:B.url.wbarticleOpenAccount,param:au,callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case"1":av.showMessage("开通成功");setTimeout(function(){av.hide()},1000);setTimeout(function(){av.afterAction()},1500);break;case"0":av.showMessage("您已经开通微博，不能重复开通");break;case"-1":av.showMessage("开通失败");break;case"-10":av.showMessage("开通失败");break;case"3":av.showMessage("开通失败");break;default:av.showMessage("开通失败");break}}};Z(ax);break;case 1:av.showMessage("该用户昵称已存在");break;default:av.showMessage("开通失败");break}}};Z(aw)};ac.prototype.init=function(){var au=this;au.btnNode.addEvent("click",function(){au.send();return false});au.changeAccountNode.addEvent("click",function(){setTimeout(function(){au.hide()},500);setTimeout(function(){au.changeAccountAction()},1000)})};function ai(av,au){this.loginWindow=new am(av,au)}function af(av,au){this.openAccount_miniwindow=new ac(av,au)}function q(au,av){au.addEvent("keydown",function(aw){var aw=aw||window.event;if(aw.keyCode==13){aw.preventDefault();av();return}})}function X(aw){var av=0,au=0;while(aw!=document.body&&aw!=null){au+=aw.offsetLeft;av+=aw.offsetTop;aw=aw.offsetParent}return{x:au,y:av}}function V(aw){if(typeof aw=="undefined"){return""}if(typeof aw!="object"){throw new Error("data sended to the server must be 'object'")}var av=[];for(var au in aw){av.push(encodeURIComponent(au)+"="+encodeURIComponent(aw[au]))}return av.join("&").replace(/%20/g,"+")}function Z(au){Y.ajax.importJs(au.url+"?"+V(au.param),function(){au.callBack()},"UTF-8")}function aj(au){Y.ajax.importJs(au.url,function(){au.callBack()},"UTF-8")}function f(au){return au.replace(/\s/g,"")}function E(aw,au){function av(){}av.prototype=aw.prototype;au.prototype=new av();au.prototype.constructor=au;au.superclass=aw.prototype;if(aw.prototype.constructor==Object.prototype.constructor){aw.prototype.constructor=aw}}function m(au,av){if(arguments.length!=2){throw new Error("the number of the args must be 2")}this.name=au;this.attribute=av}m.ensureInherit=function(){try{if(arguments.length<2){throw new Error("the length of the args must be longer than 1")}var ax=arguments[0];for(var av=1;av<arguments.length;av++){if(arguments[av].constructor!==m){throw new Error("must be 'InterFace'")}for(var au=0;au<arguments[av].attribute.length;au++){if(!ax[arguments[av].attribute[au]]){throw new Error("the methods is not conducted properly")}}}}catch(aw){alert(aw)}};function ad(au){var av={method:"click"};for(var aw in au){av[aw]=au[aw]}var ax={url:B.url.auditlink,param:av,callBack:function(){}};Z(ax)}function L(aB,av,aA){var aw=aA;var az="";var ay=0;for(i=0;i<aw;i++){var aC=aB.substring(i,i+1);var ax=aC.replace(/[^\u0000-\u007f]/g,"aa").length;if(ax==2){i++}else{ay+=1}}var au=Math.ceil(ay/2);return aB.substr(av,aA+au)}function W(){var av=window.location.href,aw=window.location.hash,au=av.indexOf(aw);if(au!=-1&&aw!=""){return av.slice(0,au)}return av}function R(av,aw){if(av.createTextRange){var au=av.createTextRange();au.move("character",aw);au.select()}else{av.focus();av.setSelectionRange(aw,aw)}}function v(ay){if(document.selection){ay.focus();var av=document.selection.createRange();ay.select();var aw=document.selection.createRange();try{av.setEndPoint("StartToStart",aw);var au=av.text.length;av.collapse(false);av.select();return au}catch(ax){return ay.selectionStart}}else{return ay.selectionStart}}function K(au){return typeof au=="function"}Y.util.simpleParse=function(av,au){return au?String(av).replace(/<#=(\w+)#>/g,function(aw,ax){return au[ax]!=null?au[ax]:aw}):av};function G(aw,au){if(!arguments.length){return}var av=this;av.wrapperElem=aw;av.textAreaElem=Y(av.wrapperElem.$("textarea")[0]);av.sendBtnElem=Y(av.wrapperElem.$(".sendinfo-btn")[0]);av.sendInfoTipElem=Y(av.wrapperElem.$(".sendinfoTip")[0]);av._maxLen=326;av._maxUrlLen=256;av._urlInclude=302;av._initTip=au||"";av._isMoreLimit=false;av._isRequest=false;av._urlReg=/(http)s?:\/\/(?:[\w-]+\.?)+[\.\/\?%&=#@$(),;\[\]\-+_!:*~\w-]+/g}G.prototype={init:function(){var au=this;au.textAreaElem.value=au._initTip;au.textAreaElem.focus();au.gotoTextPos(au.textAreaElem,au._initTip);au.initTextAreaHandle();au.countTips();au.sendBtnElem.addEvent("click",au.sendInfo.bind(au))},gotoTextPos:function(az,aB){var aw=this;var ay=aB.length;var ax=new RegExp(aB,"g");var av=az.value.search(ax);if(av==-1){var aA=v(az);var au=az.value;az.value=au.substring(0,aA)+aB+au.substring(aA,au.length);R(az,aA+ay)}else{R(az,av+ay)}aw.countTips()},deleteUrl:function(au){var aw=this;var av=new RegExp(au,"gi");aw.textAreaElem.value=aw.textAreaElem.value.trim().replace(av,function(ax){return""});aw.countTips()},countTips:function(){var av=this,au=av.textAreaElem.value;if(au.match(/^\s+$/)){au=""}else{au=au.replace(av._urlReg,function(ay){if(ay.length>av._maxUrlLen){return ay.substr((av._maxUrlLen-22),ay.length)}return !ay.match(/:\d+/g)?"**********************":ay});au=au.replace(/[\uFE30-\uFFA0\u2E80-\u9FFF\u3000\uac00-\ud7ff‘“”’]/g,"**")}var ax=Math.floor((av._maxLen-au.length)/2);var aw=ax<0?{note:"已超出",color:"#BA2636",countnum:Math.abs(ax)}:{note:"还可以输",color:"#898989",countnum:Math.abs(ax)};if(ax<0){av._isMoreLimit=true}else{av._isMoreLimit=false}av.sendInfoTipElem.attr("innerHTML",Y.util.simpleParse(l.sendInfoTip,aw))},initTextAreaHandle:function(){var au=this;au.textAreaElem.addEvent("keyup",au.countTips.bind(au));au.textAreaElem.addEvent("focus",au.countTips.bind(au));au.textAreaElem.addEvent("paste",au.countTips.bind(au));au.textAreaElem.addEvent("cut",au.countTips.bind(au));au.textAreaElem.addEvent("delete",au.countTips.bind(au));au.textAreaElem.addEvent("keydown",function(av){var av=av||window.event;if(av.ctrlKey&&av.keyCode==13){av.preventDefault();au.sendInfo();return}au.countTips.call(au)})},checkTag:function(au){var aw=this,av=[];av=au.match(B.reg.keyword);if(av){if(av.length==1&&(av[0]==au)){aw.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">再说点内容吧</em>');return false}else{if(av.length==2&&(f(au)==av[0]+av[1])){aw.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">再说点内容吧</em>');return false}}if(av.length>2){aw.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">最多包括2个#话题</em>');return false}}return true},sendInfo:function(){return true},textError:function(){var av=this;for(var au=0;au<3;au++){setTimeout(function(){av.textAreaElem.style.backgroundColor="#FEE9E9"},au*300+1);setTimeout(function(){av.textAreaElem.style.backgroundColor="#FFF"},au*300+151)}av.textAreaElem.focus()}};G.slide=function(ax){var aw=Y("#"+ax);var av=aw.scrollHeight-36;aw.addCss({height:"0px",overflow:"hidden"});var au={height:parseFloat(av)+"px"};setTimeout(function(){aw.animate(au,0.3,"linear",function(){aw.addCss({height:"",overflow:""})})},0)};E(G,ab);function ab(aw,au){ab.superclass.constructor.call(this,aw,au);var av=this;av.textAreaElem=Y(av.wrapperElem.$("textarea")[0]);av.sendBtnElem=Y(av.wrapperElem.$(".wb-article-popup-sendinfo-btn")[0]);av.sendInfoTipElem=Y(av.wrapperElem.$(".wb-article-popup-note")[0])}E(ab,u);function u(ay,av,aw,au,ax){u.superclass.constructor.call(this,ay,av);this.targetId=aw;this.winObj=au;this.refer=ax}u.prototype.sendInfo=function(){var av=this,au=av.textAreaElem.value.trim();av.countTips();if(""===au||av._isMoreLimit){av.textError();return}if(!av.checkTag(au)){return}av.textAreaElem.blur();var aw={content:au,targetId:av.targetId,isReplyToRoot:0,isRetweet:1,isReplyToIt:1};aw.method="reply";for(var ax in av.refer){aw[ax]=av.refer[ax]}var ay={url:B.url.wbarticleCommon,param:aw,callBack:av.callBack.bind(av)};if(av._isRequest){return}av._isRequest=true;Z(ay)};u.prototype.callBack=function(){if(typeof shareResult=="undefined"){return}var au=this;switch(shareResult.status){case"1":au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">评论成功</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;setTimeout(function(){au.winObj.hide()},1000);break;case"-1":au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">评论失败</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;break;case"-3":alert("未开通帐号");break;case"-5":alert("未登录");break;default:au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">评论失败</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;break}};E(ab,P);function P(ay,av,aw,au,ax){P.superclass.constructor.call(this,ay,av);this.targetId=aw;this.winObj=au;this.refer=ax}P.prototype.sendInfo=function(){var av=this,au=av.textAreaElem.value.trim();av.countTips();if(""===au||av._isMoreLimit){av.textError();return}if(!av.checkTag(au)){return}av.textAreaElem.blur();var aw={content:au,targetId:av.targetId,isReplyToRoot:0,isRetweet:2,isReplyToIt:0};aw.method="retweet";for(var ax in av.refer){aw[ax]=av.refer[ax]}var ay={url:B.url.wbarticleCommon,param:aw,callBack:av.callBack.bind(av)};if(av._isRequest){return}av._isRequest=true;Z(ay)};P.prototype.callBack=function(){if(typeof shareResult=="undefined"){return}var au=this;switch(shareResult.status){case"1":au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">转发成功</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;setTimeout(function(){au.winObj.hide()},1000);break;case"-1":au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">转发失败</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;break;case"-3":alert("开通帐号");break;case"-5":alert("未登录");break;default:au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">转发失败</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;break}};E(ab,M);function M(ax,av,au,aw){M.superclass.constructor.call(this,ax,av);this.winObj=au;this.refer=aw}M.prototype.sendInfo=function(){var av=this,au=av.textAreaElem.value.trim();av.countTips();if(""===au||av._isMoreLimit){av.textError();return}if(!av.checkTag(au)){return}av.textAreaElem.blur();var aw={content:au};aw.method="ADD_BUTTER";for(var ax in av.refer){aw[ax]=av.refer[ax]}var ay={url:B.url.wbarticleCommon,param:aw,callBack:av.callBack.bind(av)};if(av._isRequest){return}av._isRequest=true;Z(ay)};M.prototype.callBack=function(){if(typeof shareResult=="undefined"){return}var au=this;switch(shareResult.status){case"1":au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">发送成功</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;setTimeout(function(){au.winObj.hide()},1000);break;case"-1":au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">发送失败</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;break;case"-3":alert("未开通帐号");break;case"-5":alert("未登录");break;default:au.textAreaElem.value="";au.sendInfoTipElem.attr("innerHTML",'<em class="wb-article-red">发送成功</em>').addCss("opacity:0");au.sendInfoTipElem.animate({opacity:1},0.3,"linear",function(){au.sendInfoTipElem.style.opacity=""});au._isRequest=false;break}};E(af,O);function O(av,au){O.superclass.constructor.call(this,"开通微博并转发",au);this.openAccount_miniwindow.afterAction=function(){J(av,au)};this.openAccount_miniwindow.changeAccountAction=function(){new k(av,au)};this.openAccount_miniwindow.show()}E(af,Q);function Q(av,au){Q.superclass.constructor.call(this,"开通微博并评论",au);this.openAccount_miniwindow.afterAction=function(){I(av,au)};this.openAccount_miniwindow.changeAccountAction=function(){new ag(av,au)};this.openAccount_miniwindow.show()}E(af,N);function N(av,au){N.superclass.constructor.call(this,"开通微博并对TA说",au);this.openAccount_miniwindow.afterAction=function(){al(av,au)};this.openAccount_miniwindow.changeAccountAction=function(){new D(av,au)};this.openAccount_miniwindow.show()}E(af,U);function U(av,au,aw){U.superclass.constructor.call(this,"开通微博并关注",aw);this.openAccount_miniwindow.afterAction=function(){s(av,au,aw)};this.openAccount_miniwindow.changeAccountAction=function(){new F(av,au,aw)};this.openAccount_miniwindow.show()}E(af,p);function p(au){var av={keyfrom:"no"};if(typeof au=="object"){for(var aw in au){av[aw]=au[aw]}}p.superclass.constructor.call(this,"开通微博",av);this.openAccount_miniwindow.changeAccountAction=function(){new A(au)};this.openAccount_miniwindow.show()}E(ai,F);function F(av,au,aw){F.superclass.constructor.call(this,"登录并关注",aw);this.loginWindow.afterAction=function(){s(av,au,aw)};this.loginWindow.loginOpenAction=function(){new U(av,au,aw)};this.loginWindow.show()}E(ai,ag);function ag(av,au){ag.superclass.constructor.call(this,"登录并评论",au);this.loginWindow.afterAction=function(){I(av,au)};this.loginWindow.loginOpenAction=function(){new Q(av,au)};this.loginWindow.show()}E(ai,k);function k(av,au){k.superclass.constructor.call(this,"登录并转发",au);this.loginWindow.afterAction=function(){J(av,au)};this.loginWindow.loginOpenAction=function(){new O(av,au)};this.loginWindow.show()}E(ai,D);function D(av,au){D.superclass.constructor.call(this,"登录并对TA说",au);this.loginWindow.afterAction=function(){al(av,au)};this.loginWindow.loginOpenAction=function(){new N(av,au)};this.loginWindow.show()}E(ai,A);function A(au){var av={keyfrom:"no"};if(typeof au=="object"){for(var aw in au){av[aw]=au[aw]}}A.superclass.constructor.call(this,"登录微博",av);this.loginWindow.show()}function n(aw,av){var au={btnText:"评论",width:580,boxWidth:568};var ax={title:"评论该微博",content:Y.util.parseTpl(l.sendBoxWin,au)};this.comment_miniwin=new g("reply_miniwin","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,ax),600);comment_miniwin.show();new u(Y("#reply_miniwin"),"",aw,comment_miniwin,av).init()}function ar(aw,av){var au={btnText:"转发",width:580,boxWidth:568};var ax={title:"转发到微博",content:Y.util.parseTpl(l.sendBoxWin,au)};this.retweet_miniwin=new g("retweet_miniwin","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,ax),600);retweet_miniwin.show();new P(Y("#retweet_miniwin"),"",aw,retweet_miniwin,av).init()}function e(ax,av){var au={btnText:"发送",width:580,boxWidth:568};var aw={title:"对Ta说",content:Y.util.parseTpl(l.sendBoxWin,au)};this.say_miniwin=new g("say_miniwin","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,aw),600);say_miniwin.show();new M(Y("#say_miniwin"),"@"+ax+" ",say_miniwin,av).init()}function ae(av,au,aw){aw.screenName=av;aw.method="follow";var ax={url:B.url.wbarticleFolow,param:aw,callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case"1":Y(au).addCss("wb-article-folowed");au.onclick=null;break;case"-1":alert("关注失败");break;case"-3":alert("未开通微博帐号");break;case"-5":alert("未登录");break;default:alert("关注失败");break}}};Z(ax)}function s(aw,av,au){var ax={followfrom:"no",keyfrom:"no",sitechannel:"no",method:"no"};if(typeof au=="object"){for(var ay in au){ax[ay]=au[ay]}}var az={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":ae(aw,av,ax);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new U(aw,av,ax);break;case"-5":new F(aw,av,ax);break;default:break}}};Z(az);return false}function J(aw,au){var av={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof au=="object"){for(var ax in au){av[ax]=au[ax]}}var ay={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":ar(aw,av);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new O(aw,av);break;case"-5":new k(aw,av);break;default:break}}};Z(ay)}function I(aw,au){var av={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof au=="object"){for(var ax in au){av[ax]=au[ax]}}var ay={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":n(aw,av);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new Q(aw,av);break;case"-5":new ag(aw,av);break;default:break}}};Z(ay)}function al(ax,au){var av={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof au=="object"){for(var aw in au){av[aw]=au[aw]}}var ay={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":e(ax,av);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new N(ax,av);break;case"-5":new D(ax,av);break;default:break}}};Z(ay)}function aq(aw,au){var av={keyfrom:"no",sitechannel:"no",method:"no"};if(typeof au=="object"){for(var ax in au){av[ax]=au[ax]}}var ay={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":aw(av);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new p(av);break;case"-5":new A(av);break;default:break}}};Z(ay)}var an=new m("statusAction",["action","showAccount","showLogin"]);function w(au){m.ensureInherit(au,an);var av={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":au.action();break;case"-1":alert("发生错误，请稍后再试");break;case"-3":au.showAccount();break;case"-5":au.showLogin();break;default:break}}};Z(av)}function h(av,au){var aw={url:B.url.wbarticleCommon,param:av,callBack:au.callBack.bind(au)};Z(aw)}window.WbApp={};WbApp.extend=E;WbApp.ArticleSendBox=G;WbApp.CommonLoginWin=A;WbApp.CommonAccountWin=p;WbApp.checkStatus=aq;WbApp.sendContent=h;WbApp.loginWin=ai;WbApp.accountWin=af;WbApp.checkUserStatus=w;WbApp.InterFace=m;WbApp.PagerView=ak;WbApp.crossDomainRequest=Z;WbApp.doAudit=ad;WbApp.cutString=L;WbApp.crossjsDomainRequest=aj;WbApp.simpleParse=Y.util.simpleParse;WbApp.WbFollow=s;WbApp.WbRetweet=J;WbApp.WbComment=I;WbApp.WbSay=al;l.shareWindow='<iframe id="wb-article-frame" scrolling="no" frameborder="0" width="<#=width#>" height="<#=height#>" src="<#=src#>"></iframe>';l.shareTips='<a class="wb-article-sharelink" id="<#=linkId#>" target="_self" href="javascript:void(0);"></a><a href="javascript:;" class="wb-article-sharenum" hidefocus="true" id="<#=numId#>" rel="nofollow"></a><div class="wb-article-sharetipswraper">   <span id="<#=tipsId#>" class="wb-article-sharetips">      <span class="wb-article-sharearrow"></span>   </span></div>';l.shareTipsSm='<a class="wb-article-sharelink" id="<#=linkId#>" target="_self" href="javascript:void(0);"></a><a href="javascript:;" hidefocus="true" class="wb-article-sharenum" id="<#=numId#>"></a><span class="wb-photo-share-inner">(<a href="javascript:;" class="wb-photo-sharenum" hidefocus="true" id="<#=photonumId#>" rel="nofollow"></a>)</span>';function z(aw){var au={template:"",width:400,title:"提示"};for(var ax in aw){au[ax]=aw[ax]}var ax={title:au.title,content:au.template};var av=new g("wb-article-showPopWindow","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,ax),au.width+20);av.show();return av}function T(ax,av,az){var au={height:av,src:B.url.wbarticleShare+"?"+az,width:ax};var ay={title:"转发到网易微博",content:Y.util.parseTpl(l.shareWindow,au)};var aw=new g("wb-article-showPopWindow","wb-article-newdialogLayer wb-article-common",Y.util.parseTpl(l.commonPopWindow,ay),ax+20);aw.show();B.currentWindow=aw}var C=false;function r(aw){if(C){return}var av={source:"",link:""};for(var ax in aw){av[ax]=aw[ax]}if(typeof av.images!="undefined"){av.images=K(av.images)?av.images():av.images}var au=decodeURIComponent(V(av));var ay={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}C=false;B.email=shareResult.email;switch(shareResult.status){case"1":T(543,226,au);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":T(543,510,au);break;case"-5":T(543,510,au);break;default:break}}};C=true;Z(ay)}function S(au){if(!Y("#wb-article-frame")){return}Y("#wb-article-frame").style.height=au+"px"}function ah(){if(B.currentWindow!=""){B.currentWindow.hide()}}function aa(){if(Y(".wb-article-sharenum").length==0){return}Y(".wb-article-sharenum").each(function(av,au){var aw=parseInt(au.innerHTML);au.innerHTML=aw+1})}function H(ax,aw){document.domain="163.com";var av=W();var ay=av.match("[0-9a-zA-Z]+.([0-9a-zA-Z]+.)*([0-9a-zA-Z]+)/[0-9a-zA-Z/_]+[0-9a-zA-Z_]+")[0];var au="http://static.t.126.net/share/newshare/"+ay+".js";var az={url:au,callBack:function(){var aF=window.twitteData;if(typeof aF!="undefined"){if(!Y("#"+aw)){return}var aB={linkId:"wb-article-sharelink",numId:"page_tweet_count",tipsId:"tweet_page_name"};Y("#"+aw).innerHTML=Y.util.parseTpl(l.shareTips,aB);Y("#wb-article-sharelink").addEvent("click",function(){r(ax);return false});Y("#page_tweet_count").innerHTML=aF.retweetcount;Y("#page_tweet_count").href=aF.tweetLink+"?method=click&keyfrom=shareNum";var aG;var aI;if(aF.retweetcount==0){var aK=document.createTextNode("快来率先转发！");aG=document.createElement("div");aG.className="wb-article-sharetipswraper-darkrow";aG.appendChild(aK);aI=document.createElement("span");Y("#page_tweet_count").href="javascript:;";Y("#page_tweet_count").attr("target","_self");Y("#page_tweet_count").addCss("wb-article-sharenum-cursor")}else{if(aF.retweetcount==1){var aJ=document.createTextNode("转发就能留名！");aG=document.createElement("div");aG.className="wb-article-sharetipswraper-lightrow";aG.appendChild(aJ);var aC=document.createElement("a");aC.innerHTML=L(aF.firstUser,0,3);aC.href=aF.firstUserUrl+"?method=click&keyfrom=share163.find.click";aC.setAttribute("rel","nofollow");aC.title=aF.firstUser;aC.target="_blank";var aA=document.createTextNode(" 率先转发");aI=document.createElement("div");aI.className="wb-article-sharetipswraper-darkrow";aI.appendChild(aC);aI.appendChild(aA)}else{var aE=document.createElement("a");aE.innerHTML=L(aF.lastUser,0,3);aE.href=aF.lastUserUrl+"?method=click&keyfrom=share163.gang.click";aE.setAttribute("rel","nofollow");aE.title=aF.lastUser;aE.style.textDecoration="none";aE.target="_blank";var aD=document.createTextNode(" 刚刚转发");aG=document.createElement("div");aG.className="wb-article-sharetipswraper-lightrow";aG.appendChild(aE);aG.appendChild(aD);var aC=document.createElement("a");aC.innerHTML=L(aF.firstUser,0,3);aC.href=aF.firstUserUrl+"?method=click&keyfrom=share163.find.click";aC.setAttribute("rel","nofollow");aC.title=aF.firstUser;aC.style.textDecoration="none";aC.target="_blank";var aA=document.createTextNode(" 率先转发");aI=document.createElement("div");aI.className="wb-article-sharetipswraper-darkrow";aI.appendChild(aC);aI.appendChild(aA)}}var aH=document.getElementById("tweet_page_name");aH.appendChild(aG);aH.appendChild(aI)}}};aj(az)}function ap(ax,aw){document.domain="163.com";var av=W();var ay=av.match("[0-9a-zA-Z]+.([0-9a-zA-Z]+.)*([0-9a-zA-Z]+)/[0-9a-zA-Z/_]+[0-9a-zA-Z_]+")[0];var au="http://static.t.126.net/share/newshare/"+ay+".js";var az={url:au,callBack:function(){var aA=window.twitteData;if(typeof aA!="undefined"){if(!Y("#"+aw)){return}var aB={linkId:"wb-article-sharelink-sm",numId:"page_tweet_count-sm",photonumId:"photo_page_tweet_count-sm"};Y("#"+aw).innerHTML=Y.util.parseTpl(l.shareTipsSm,aB);Y("#wb-article-sharelink-sm").addEvent("click",function(){r(ax);return false});Y("#page_tweet_count-sm").innerHTML=aA.retweetcount;Y("#photo_page_tweet_count-sm").innerHTML=aA.retweetcount;if(aA.retweetcount==0){Y("#page_tweet_count-sm").href="javascript:;";Y("#page_tweet_count-sm").attr("target","_self");Y("#page_tweet_count-sm").addCss("wb-article-sharenum-cursor");Y("#photo_page_tweet_count-sm").href="javascript:;";Y("#photo_page_tweet_count-sm").attr("target","_self");Y("#photo_page_tweet_count-sm").addCss("wb-article-sharenum-cursor")}else{Y("#page_tweet_count-sm").href=aA.tweetLink+"?method=click&keyfrom=shareNum";Y("#page_tweet_count-sm").removeCss("wb-article-sharenum-cursor");Y("#photo_page_tweet_count-sm").href=aA.tweetLink+"?method=click&keyfrom=shareNum";Y("#photo_page_tweet_count-sm").removeCss("wb-article-sharenum-cursor")}}}};aj(az)}WbApp.resizeHeight=S;WbApp.closeShareWindow=ah;WbApp.addShareCount=aa;WbApp.initShareTips=H;WbApp.initShareTipsSm=ap;WbApp.showPopWindow=r;WbApp.showCustomWindow=z;function ao(aC,az,aE,aM){if(parseInt(az)>100){return}if(!Y("#"+aC)){return}var aJ={},au={};l.followIcon='   <div class="wb-article-star-list-one">      <div class="wb-article-star-list-photo">            <a href="http://t.163.com/<#=screenName#>?method=click&keyfrom=op.wz.gfo.name" title="<#=name#>" target="_blank" rel="nofollow">                 <img alt="<#=name#>" src="<#=profileImage#>" class="wb-article-thumb" />            </a>      </div>      <div class="wb-article-star-list-name">            <input type="checkbox" checked="checked" value="<#=screenName#>" id="<#=screenName#>" /><label title="<#=nameD#>" for="<#=screenName#>"><#=name#></label>      </div>      <div class="wb-article-star-list-intro" title="<#=introductionD#>">            <span><#=introduction#></span>      </div>   </div> ';l.followWraper='   <div class="wb-article-followSelected-wraper wb-article-common" style="border: 1px solid #ccc;">     <div class="wb-article-followSelected-bar"><div class="wb-article-followSelected-logo"><a href="http://t.163.com/?method=click&keyfrom=op.wz.gfo.towb" rel="nofollow" target="_blank"><em></em>网易微博</a></div> </div>     <div id="wbnewsWraper"></div>     <div class="wb-article-followSelected-title">            <span class="wb-article-followSelected-icon">达人推荐</span> <span id="pagerWraper"></span>     </div>     <div class="wb-article-followSelected-wraper-list wb-article-clearfix" id="followWraper">     </div>     <div class="wb-article-followSelected-wraper-follow">            <div class="wb-article-folloSelected-btnWraper">                    <a href="javascript:;" target="_self" class="wb-article-btnbg wb-article-commonbtn" id="followBtn"><em class="wb-article-btnbg">批量关注</em></a>                    <a href="javascript:;" target="_self" class="wb-article-btnbg wb-article-commonbtn wb-article-disabledbtn" id="followdoneBtn" style="display:none;"><em class="wb-article-btnbg">关注成功</em></a>                    <a href="http://t.163.com/?method=click&keyfrom=op.wz.gfo.towb" rel="nofollow" class="wb-article-enter" id="wbenterbtn">进入网易微博</a>                    <span class="wb-article-enter wb-article-tips" id="wberrortips" style="display:none">请勾选要关注的人</span>            </div>     </div>   </div>';l.newsWraper='   <div class="wb-article-followSelected-news">     <ul class="wb-article-followSelected-headline">         <#=headlines#>     </ul>     <ul class="wb-article-followSelected-article wb-article-followSelected-left">         <#=leftnews#>     </ul>     <ul class="wb-article-followSelected-article wb-article-followSelected-right">         <#=rightnews#>     </ul>   </div>';E(af,aB);function aB(aQ,aO,aP){aB.superclass.constructor.call(this,"开通微博并关注",aP);this.openAccount_miniwindow.afterAction=function(){aA(aQ,aO,aP)};this.openAccount_miniwindow.changeAccountAction=function(){new aH(aQ,aO,aP)};this.openAccount_miniwindow.show()}E(ai,aH);function aH(aQ,aO,aP){aH.superclass.constructor.call(this,"登录并关注",aP);this.loginWindow.afterAction=function(){aA(aQ,aO,aP)};this.loginWindow.loginOpenAction=function(){new aB(aQ,aO,aP)};this.loginWindow.show()}function aD(aR,aO,aP){aP.screenName=aR;aP.method="follow";var aQ={url:B.url.wbarticleFolow,param:aP,callBack:function(){if(typeof shareResult=="undefined"){return}switch(shareResult.status){case"1":aJ.followbtn.style.display="none";aJ.followdonebtn.style.display="inline-block";aJ.timer=setTimeout(function(){if(aJ.index==aJ.totalPage){aJ.index=1;return}else{aJ.index++}aJ.followbtn.style.display="inline-block";aJ.followdonebtn.style.display="none";aJ.pager._onclick(aJ.index)},2000);break;case"-1":alert("关注失败");break;case"-3":alert("未开通微博帐号");break;case"-5":alert("未登录");break;default:alert("关注失败");break}}};if(aR==""){aJ.enter.style.display="none";aJ.error.style.display="inline";setTimeout(function(){aJ.enter.style.display="inline";aJ.error.style.display="none"},1000);return}Z(aQ)}function aw(aO){if(aO){aJ.followbtn.style.display="none";aJ.followdonebtn.style.display="inline-block"}else{aJ.followbtn.style.display="inline-block";aJ.followdonebtn.style.display="none"}}function aA(aT,aP,aO){var aQ={followfrom:"no",keyfrom:"no",sitechannel:"no"};if(typeof aO=="object"){for(var aR in aO){aQ[aR]=aO[aR]}}var aS={url:B.url.wbarticleCheckStatus,param:{screenName:"163",timestamp:(new Date()).getTime()},callBack:function(){if(typeof shareResult=="undefined"){return}B.email=shareResult.email;switch(shareResult.status){case"1":aD(aT,aP,aQ);break;case"-1":alert("发生错误，请稍后再试");break;case"-3":new aB(aT,aP,aQ);break;case"-5":new aH(aT,aP,aQ);break;default:break}}};Z(aS)}E(ak,ay);function ay(aO){ay.superclass.constructor.call(this,aO)}ay.prototype.render=function(aO){this.wraperId=aO;this.container=aO;this._calculate();var aP="";if(this.options.pageCount>1){if(this.options.index!=this.options.pageCount){aP+='<a class="wb-article-followSelected-change" hideFocus="true"  href="javascript://'+(this.options.index+1)+'" target="_self">换些看看</a>'}else{aP+='<a class="wb-article-followSelected-change" hideFocus="true" href="javascript://1" target="_self" >换些看看</a>'}}this.container.innerHTML=aP;this.bind()};function av(aR){if(aR.length==0){return""}var aQ=[];for(var aP=0;aP<aR.length;aP++){var aO={screenName:aR[aP].screenName,name:L(aR[aP].title,0,5),nameD:aR[aP].title,profileImage:Y.util.parseTpl(B.url.wbarticleOimage,{width:54,height:54,url:encodeURIComponent(aR[aP].profileImage)}),introduction:L(aR[aP].introduction,0,6),introductionD:aR[aP].introduction};aQ.push(Y.util.parseTpl(l.followIcon,aO));au[aR[aP].screenName]="163"}return aQ}function aL(aR){var aP=aR.recommendTopArticle,aV=aR.recommendArticle;if(aP.length==0&&aV.length==0){return[]}var aT=[],aO=[],aU=[];for(var aS=0;aS<aP.length;aS++){if(aS<2){var aW="nosub";if(aS==1){aW="newssub"}var aX='<li class="'+aW+'" title="'+aP[aS].title+'">'+L(aP[aS].title,0,16)+"</li>";if(aP[aS].url&&aP[aS].url!=""){aX='<li class="'+aW+'"><a href="'+aP[aS].url+'" rel="nofollow" target="_blank" title="'+aP[aS].title+'">'+L(aP[aS].title,0,16)+"</a></li>"}aT.push(aX)}}for(var aS=0;aS<aV.length;aS++){if(aS<8){var aQ='<li  title="'+aV[aS].title+'">'+L(aV[aS].title,0,16)+"</li>";if(aV[aS].url&&aV[aS].url!=""){aQ='<li><a href="'+aV[aS].url+'" rel="nofollow" target="_blank" title="'+aV[aS].title+'">'+L(aV[aS].title,0,16)+"</a></li>"}if(aS<4){aO.push(aQ)}else{aU.push(aQ)}}}return[aT.join(""),aO.join(""),aU.join("")]}var aI=6;if(typeof aE=="number"){aI=aE}function aF(aO){aJ.pager=new ay({itemCount:aO.length,size:aI,maxButtons:0});aJ.pager.staticDataCollection=aO;aJ.pager.onclick=function(aP){aJ.timer&&clearTimeout(aJ.timer);var aQ=this.getStaticData(aP);aJ.darenWraper.innerHTML=aQ.join("");aJ.darenWraper.$("input").each(function(aS,aR){if(!au[aR.value]){aR.checked=false}});aJ.index=aP;if(aJ[aJ.index.toString()]){aw(true);return}aw(false)};aJ.pager.render(aJ.pagerWraper);aJ.pager.onclick(1);aJ.totalPage=Math.ceil(aO.length/aI)}var aK={method:"follow",followfrom:"op.wz.gfo",keyfrom:"op.wz.gfo",sitechannel:"no"};if(typeof aM=="object"){for(var aG in aM){aK[aG]=aM[aG]}}Y("#"+aC).innerHTML=l.followWraper;aJ.enter=Y("#wbenterbtn");aJ.error=Y("#wberrortips");aJ.pagerWraper=Y("#pagerWraper");aJ.darenWraper=Y("#followWraper");aJ.followbtn=Y("#followBtn");aJ.followdonebtn=Y("#followdoneBtn");aJ.newsWraper=Y("#wbnewsWraper");var ax={url:Y.util.parseTpl(B.url.wbarticleNewsList,{channelId:az}),callBack:function(){if(typeof articleLinkList=="undefined"){return}var aO=aL(articleLinkList);if(aO.length==0){return}aJ.newsWraper.innerHTML=Y.util.parseTpl(l.newsWraper,{headlines:aO[0],leftnews:aO[1],rightnews:aO[2]});aJ.newsWraper.addEvent("click",function(aQ){var aP=aQ.target||aQ.srcElement;switch(aP.tagName.toLowerCase()){case"a":ad({method:"click",keyfrom:aK.keyfrom+".link"});break;default:break}})}};aj(ax);var aN={url:Y.util.parseTpl(B.url.wbarticleStarList,{channelId:az}),callBack:function(){if(typeof recommendList=="undefined"){return}var aO=av(recommendList);new aF(aO);aJ.darenWraper.addEvent("click",function(aQ){var aP=aQ.target||aQ.srcElement;switch(aP.tagName.toLowerCase()){case"input":aP.checked?au[aP.value]="163":au[aP.value]=null;aJ[aJ.index.toString()]=null;aw(false);break;default:break}});aJ.followbtn.onclick=function(){var aP=[];aJ.darenWraper.$("input").each(function(aR,aQ){if(aQ.checked){aP.push(aQ.value)}});aA(aP.join(","),this,aK);if(aP.length==0){return}aJ[aJ.index.toString()]="163";return false}}};aj(aN)}WbApp.createFollowSelectedHtml=ao;Y.ready(function(){var au=document.createElement("div");document.body.insertBefore(au,document.body.firstChild);B.shade=new at(au)})})(NTES);