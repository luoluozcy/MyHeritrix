(function(g,d,f,b){var j=!!document.createElement("canvas").getContext,c={drawPie:function(l,m,k){k=d.extend({fix:2,labelRadius:0.55,labelFontSize:12,hoverable:1,labelShow:1,labelHoverShow:1},k);d.plot(l,m,{series:{pie:{show:1,radius:1,label:{show:k.labelShow,radius:k.labelRadius,threshold:0.05,formatter:function(o,p){var n=p.percent.toFixed(k.fix);return'<div style="font-size:'+k.labelFontSize+'px;text-align:center;padding:2px;color:#fff;">'+(o?(o+"<br/>"):"")+n+"%</div>"},background:{opacity:0}},combine:{label:"其他",threshold:(k.combine===b?3:combine)/100},highlight:{opacity:0.1}}},legend:{show:0},grid:{hoverable:!!k.hoverable,clickable:1},hooks:{bindEvents:function(p,n){var o=d(l);if(k.labelHoverShow){d(".pieLabel",o).hide();o.hover(function(q){d(".pieLabel",o).show()},function(q){d(".pieLabel",o).hide()})}}}})},drawBar:function(m,r,k){var o=[],q=[],p,s=r.length,l=0;k=d.extend({showAllYTip:1,shwoHoverYTip:1,yNumberShow:0},k);for(;l<s;l++){p=r[l];o.push({label:p.label,data:[[l+1,p.data]],color:p.color});q.push([l+1,p.label])}d.plot(m,o,{series:{bars:{show:1,lineWidth:0,barWidth:0.45,align:"center",fillColor:{colors:[{opacity:1},{opacity:1}]}},points:{show:false,radius:3}},xaxis:{tickLength:3,min:0.5,max:s+0.5,position:"bottom",ticks:q},yaxis:{tickFormatter:function(t,n){return t+"%"}},legend:{show:0},grid:{show:1,borderWidth:0,hoverable:1,clickable:false},hooks:{bindEvents:function(u,n){var t=d(m);if(!k.yNumberShow){d(".yAxis",t).hide()}if(k.showAllYTip){i(u,{ox:-14,oy:-20})}}}});!k.showAllYTip&&k.shwoHoverYTip&&e(m,"%",{ox:-14,oy:-20})},drawLine:function(l,m,k){k=d.extend({showX:0,showAllYTip:0,shwoHoverYTip:1,tickDecimals:1},k);d.plot(l,m,{lines:{show:true},xaxis:{show:k.showX},yaxis:{tickDecimals:k.tickDecimals},grid:{borderWidth:0,mouseActiveRadius:15,hoverable:true,clickable:false},hooks:{bindEvents:function(o,n){if(k.showAllYTip){i(o,{ox:-11,oy:-19})}}}});!k.showAllYTip&&k.shwoHoverYTip&&e(l,"",{ox:-6,oy:-22})}};d.each(["drawPie","drawBar","drawLine"],function(k,l){d[l]=f[l]=function(){var m=arguments;f.loadCdnJS("js2/canvas/canvas.js",function(){return j},function(){j=true;f.loadCdnJS("js2/canvas/flot.js",function(){return !!d.plot},function(){c[l].apply(d,m)})})}});d.groupLine=function(n,l,m){var k=arguments;f.loadCdnJS("js2/canvas/canvas.js",function(){return j},function(){j=true;f.loadCdnJS("js2/canvas/groupline.js",function(){d.groupLine.apply(d,k)})})};var h='<div class="flotChartTip" style="position:absolute;z-index:1000;padding:3px;font-size:9px;border-radius:5px;font-family:Verdana, Arial, Helvetica, Tahoma, sans-serif;opacity: 0.9;"></div>';function e(k,n,p){var l=null,m=null,o;n=n||"";d(k).bind("plothover",function(t,v,s){var q,u,r;if(s){if((m!=s.series.label)||(l!=s.dataIndex)){l=s.dataIndex;m=s.series.label;u=s.datapoint[1];r=s.series.color;o&&o.hide();o=a(k,s.pageX,s.pageY,r,u+n,p)}}else{o&&o.hide();l=null}})}function a(m,k,r,l,n,q){var p=d(".flotChartTip",d(m)),o=d(m).offset();q=d.extend({ox:-10,oy:-20},q);if(!p[0]){p=d(h).css({display:"none"}).appendTo(m).fadeIn(200)}p.html(n).css({left:k-o.left+q.ox,top:r-o.top+q.oy}).fadeIn(200);return p}function i(p,m){var q,s,r,o=p.getData(),k=p.getAxes().yaxis,n=k.tickFormatter,l=p.getPlaceholder();m=d.extend({ox:-10,oy:-20},m);d.each(o,function(v,u){d.each(u.data,function(t,w){s=w[0];r=w[1];q=p.pointOffset({x:s,y:r});r=n?n(r,k):r;d(h).html(r).css({left:q.left+m.ox,top:q.top+m.oy}).appendTo(l).show()})})}})(window,jQuery,Core);