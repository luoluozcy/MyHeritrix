(function(d,e,f){var c=function(i,j,h){this.config=e.extend({},a,h||{});this[i==1?"init":"init2"](j)},a={css:"",wraper:"<div class='jtipWraper'><i></i>{content}</div>",maxWidth:225},b=function(i){var h=0,j=function(m){var k=m.offsetParent(),l=k[0]?((k.css("zIndex")||"")+"").replace(/\D/g,""):"";if(l){h=Math.max(h,+(l||1))}if(!k[0]||k[0]==document.body){return}j(k)};j(e(i));return h<=0?f:(h+2)};c.prototype={init:function(i){var h=this;e(i).bind({mouseenter:function(j){h.mouseenter(j,this)},mouseleave:function(j){h.mouseleave(j,this)}})},init2:function(h){var i=this;e(document).delegate(h,"mouseenter",function(j){i.mouseenter(j,this)}).delegate(h,"mouseleave",function(j){i.mouseleave(j,this)})},mouseenter:function(j,l){var h=this,i=e(l),k=i.attr("title");if(k){i.attr("inf",k).removeAttr("title")}l.timer&&d.clearTimeout(l.timer);l.timer=d.setTimeout(function(){c.hide();h.showTipFor(l)},200)},mouseleave:function(h,i){i.timer&&d.clearTimeout(i.timer);i.timer=d.setTimeout(c.hide,200)},showTipFor:function(s){var w=e(s),o=w.attr("tip"),y=w.attr("title"),l=w.attr("inf"),x,k=this,m=this.config.wraper,j,p,r=!o,h,t,u,q=0,n;if(y){w.attr("inf",y).removeAttr("title")}x=o?e(o):(y||l)?e(m.replace(/{content}/g,y||l)).appendTo(document.body):[null];if(!x[0]){return}if(!x[0].id){x[0].id="tip"+(+new Date())+(parseInt(Math.random()*1000));w.attr("tip","#"+x[0].id)}if(r){x[0].autoCreate=true}n=(new Function("return {"+(w.attr("tipconf")||"").replace(/[\{\}]/g,"")+"}"))();e.each(["maxWidth","css"],function(A,z){k.config[z]=n[z]||k.config[z]});this.config.css&&x.addClass(this.config.css);c.Current=s;if(!x[0].initTipEvent){x.appendTo(document.body).bind({mouseenter:function(){s.timer&&d.clearTimeout(s.timer)},mouseleave:function(){s.timer=d.setTimeout(c.hide,200)}});x[0].initTipEvent=true}x.removeAttr("style").show();if(x[0].autoCreate&&x.outerWidth()>this.config.maxWidth){x.width(this.config.maxWidth)}j=w.offset();p={width:w.outerWidth(),height:w.outerHeight()};h=j.left+p.width/2-25;if(x[0].autoCreate){t=Math.max(e(d).width(),e(document.body).width())-x.outerWidth()+e(d).scrollLeft(),u=h;if(t<u){q=u-t;h=t}else{if(u<0){q=-u;h=0}}x.find("i").css("left",19+q)}var i=(x.css("zIndex")+"").replace(/\D/g,""),v=(r||!i)?b(w):f;x.hide().css({left:h,top:j.top+p.height+10,position:"absolute",zIndex:v}).show();if(v){x.attr("autoIndex",v)}}};c.hide=function(h){var j=c.Current,i;if(j){j.timer&&d.clearTimeout(j.timer);i=e(e(j).attr("tip"));if(!h||(h&&i.attr("autoIndex"))){i.hide();c.Current=null}}};e.fn.jtip=function(h){return this.each(function(){new c(1,this,h)})};var g={};e.jtip=function(i,h){if(typeof i!="string"){return this}if(g[i]){return this}g[i]=1;new c(2,i,h);return this};e.jtip.hide=function(){c.hide()};e(d).scroll(function(){c.hide(true)})})(window,jQuery);